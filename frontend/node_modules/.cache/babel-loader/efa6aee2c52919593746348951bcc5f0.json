{"remainingRequest":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/babel-loader/lib/index.js!/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/engine/Documents/D-VJ/QA2/qa/frontend/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/src/views/Login.vue","mtime":1590229061788},{"path":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1588785011040},{"path":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/babel-loader/lib/index.js","mtime":1584985692138},{"path":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1588785011040},{"path":"/Users/engine/Documents/D-VJ/QA2/qa/frontend/node_modules/vue-loader/lib/index.js","mtime":1588785012576}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGF1dGhlbnRpY2F0ZTogZnVuY3Rpb24gYXV0aGVudGljYXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5lbmRwb2ludHMub2J0YWluSldULCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVRva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7IC8vIGdldCBhbmQgc2V0IGF1dGggdXNlcgoKCiAgICAgICAgdmFyIGJhc2UgPSB7CiAgICAgICAgICBiYXNlVVJMOiBfdGhpcy4kc3RvcmUuc3RhdGUuZW5kcG9pbnRzLmJhc2VVcmwsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIC8vIFNldCB5b3VyIEF1dGhvcml6YXRpb24gdG8gJ0pXVCcsIG5vdCBCZWFyZXIhISEKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkpXVCAiLmNvbmNhdChfdGhpcy4kc3RvcmUuc3RhdGUuand0KSwKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgfSwKICAgICAgICAgIHhockZpZWxkczogewogICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9OyAvLyBFdmVuIHRob3VnaCB0aGUgYXV0aGVudGljYXRpb24gcmV0dXJuZWQgYSB1c2VyIG9iamVjdCB0aGF0IGNhbiBiZQogICAgICAgIC8vIGRlY29kZWQsIHdlIGZldGNoIGl0IGFnYWluLiBUaGlzIHdheSB3ZSBhcmVuJ3Qgc3VwZXIgZGVwZW5kYW50IG9uCiAgICAgICAgLy8gSldUIGFuZCBjYW4gcGx1ZyBpbiBzb21ldGhpbmcgZWxzZS4KCiAgICAgICAgdmFyIGF4aW9zSW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoYmFzZSk7CiAgICAgICAgYXhpb3NJbnN0YW5jZSh7CiAgICAgICAgICB1cmw6ICIvYXBpL3VzZXJzLyIsCiAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgcGFyYW1zOiB7fQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRBdXRoVXNlciIsIHsKICAgICAgICAgICAgYXV0aFVzZXI6IHJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIGNvbnNvbGUuZGVidWcoZXJyb3IpOwogICAgICAgIGNvbnNvbGUuZGlyKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,MAAA,KAAA,CAAA,IAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,SAAA,EAAA,OAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EADA,CAEA;;;AACA,YAAA,IAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,OADA;AAEA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,aAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAFA;AAGA,4BAAA;AAHA,WAFA;AAOA,UAAA,SAAA,EAAA;AACA,YAAA,eAAA,EAAA;AADA;AAPA,SAAA,CAHA,CAcA;AACA;AACA;;AACA,YAAA,aAAA,GAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,QAAA,aAAA,CAAA;AACA,UAAA,GAAA,EAAA,aADA;AAEA,UAAA,MAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA;AAHA,SAAA,CAAA,CAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EACA;AAAA,YAAA,QAAA,EAAA,QAAA,CAAA,IAAA;AAAA,YAAA,eAAA,EAAA;AAAA,WADA;;AAGA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SAVA;AAYA,OA/BA,EAgCA,KAhCA,CAgCA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OApCA;AAqCA;AA3CA;AARA,CAAA","sourcesContent":["<template lang=\"html\">\n  <form class=\"login form\">\n    <div class=\"field\">\n      <label for=\"id_email\">Email</label>\n      <input\n        v-model=\"email\"\n        type=\"text\"\n        placeholder=\"Email\"\n        autofocus=\"autofocus\"\n        maxlength=\"150\"\n        id=\"id_email\">\n    </div>\n    <div class=\"field\">\n      <label for=\"id_password\">Password</label>\n      <input\n        v-model=\"password\"\n        type=\"password\"\n        placeholder=\"Password\"\n        id=\"id_password\">\n    </div>\n    <button\n      @click.prevent=\"authenticate\"\n      class=\"button primary\"\n      type=\"submit\">\n      Log In\n    </button>\n  </form>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  \n  data () {\n    return {\n      email: '',\n      password: ''\n    }\n  },\n  methods: {\n    authenticate () {\n      const payload = {\n        email: this.email,\n        password: this.password\n      }\n      axios.post(this.$store.state.endpoints.obtainJWT, payload)\n        .then((response) => {\n          this.$store.commit('updateToken', response.data.token)\n          // get and set auth user\n          const base = {\n            baseURL: this.$store.state.endpoints.baseUrl,\n            headers: {\n            // Set your Authorization to 'JWT', not Bearer!!!\n              Authorization: `JWT ${this.$store.state.jwt}`,\n              'Content-Type': 'application/json'\n            },\n            xhrFields: {\n                withCredentials: true\n            }\n          }\n          // Even though the authentication returned a user object that can be\n          // decoded, we fetch it again. This way we aren't super dependant on\n          // JWT and can plug in something else.\n          const axiosInstance = axios.create(base)\n          axiosInstance({\n            url: \"/api/users/\",\n            method: \"get\",\n            params: {}\n          })\n            .then((response) => {\n              this.$store.commit(\"setAuthUser\",\n                {authUser: response.data, isAuthenticated: true}\n              )\n              this.$router.push({name: 'home'})\n            })\n\n        })\n        .catch((error) => {\n          console.log(error);\n          console.debug(error);\n          console.dir(error);\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"css\">\n</style>"],"sourceRoot":"src/views"}]}